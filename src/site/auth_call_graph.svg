<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" contentScriptType="application/ecmascript" contentStyleType="text/css"
     height="2142px" preserveAspectRatio="none" style="width:1440px;height:2142px;" version="1.1"
     viewBox="0 0 1440 2142" width="1440px" zoomAndPan="magnify"><defs><filter height="300%" id="fgmh1ua05c87c" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="245" x="593.25" y="22.9951">Autentication Filters Call Graph</text><rect fill="#FFFFFF" filter="url(#fgmh1ua05c87c)" height="1984.3047" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="228.5" y="99.7266"/><rect fill="#FFFFFF" filter="url(#fgmh1ua05c87c)" height="47.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="233.5" y="282.5234"/><rect fill="#FFFFFF" filter="url(#fgmh1ua05c87c)" height="47.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="233.5" y="555.5859"/><rect fill="#FFFFFF" filter="url(#fgmh1ua05c87c)" height="148.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="233.5" y="774.25"/><rect fill="#FFFFFF" filter="url(#fgmh1ua05c87c)" height="47.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="233.5" y="1674.4375"/><rect fill="#FFFFFF" filter="url(#fgmh1ua05c87c)" height="47.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="233.5" y="1987.8984"/><rect fill="#FFFFFF" filter="url(#fgmh1ua05c87c)" height="233.7969" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="594.5" y="702.9844"/><rect fill="#FFFFFF" filter="url(#fgmh1ua05c87c)" height="752.5234" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="594.5" y="990.0469"/><rect fill="#FFFFFF" filter="url(#fgmh1ua05c87c)" height="47.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="599.5" y="1252.1094"/><rect fill="#FFFFFF" filter="url(#fgmh1ua05c87c)" height="47.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="599.5" y="1554.1719"/><rect fill="#FFFFFF" filter="url(#fgmh1ua05c87c)" height="123.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="844.5" y="220.2578"/><rect fill="#FFFFFF" filter="url(#fgmh1ua05c87c)" height="138.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="844.5" y="478.1875"/><rect fill="#FFFFFF" filter="url(#fgmh1ua05c87c)" height="105.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="844.5" y="803.3828"/><rect fill="#FFFFFF" filter="url(#fgmh1ua05c87c)" height="138.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="844.5" y="1174.7109"/><rect fill="#FFFFFF" filter="url(#fgmh1ua05c87c)" height="138.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="844.5" y="1476.7734"/><rect fill="#FFFFFF" filter="url(#fgmh1ua05c87c)" height="153.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="844.5" y="1895.3672"/><rect fill="#FFFFFF" filter="url(#fgmh1ua05c87c)" height="62.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1108.5" y="128.8594"/><rect fill="#FFFFFF" filter="url(#fgmh1ua05c87c)" height="62.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1108.5" y="832.5156"/><rect fill="#FFFFFF" filter="url(#fgmh1ua05c87c)" height="214.7969" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1285.5" y="415.9219"/><rect fill="#FFFFFF" filter="url(#fgmh1ua05c87c)" height="199.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1285.5" y="1127.5781"/><rect fill="#FFFFFF" filter="url(#fgmh1ua05c87c)" height="199.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1285.5" y="1429.6406"/><rect fill="#FFFFFF" filter="url(#fgmh1ua05c87c)" height="260.1953" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1285.5" y="1802.8359"/><rect fill="#FFFFFF" filter="url(#fgmh1ua05c87c)" height="798.7891" style="stroke: #000000; stroke-width: 2.0;" width="1275" x="143.5" y="951.7813"/><rect fill="#FFFFFF" filter="url(#fgmh1ua05c87c)" height="288.0625" style="stroke: #000000; stroke-width: 2.0;" width="916.5" x="492" y="1047.1797"/><rect fill="#FFFFFF" filter="url(#fgmh1ua05c87c)" height="288.0625" style="stroke: #000000; stroke-width: 2.0;" width="916.5" x="492" y="1349.2422"/><rect fill="#FFFFFF" filter="url(#fgmh1ua05c87c)" height="78.2656" style="stroke: #000000; stroke-width: 2.0;" width="553.5" x="153.5" y="1651.3047"/><rect fill="#FFFFFF" filter="url(#fgmh1ua05c87c)" height="306.4609" style="stroke: #000000; stroke-width: 2.0;" width="1264.5" x="153.5" y="1764.5703"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="33" x2="33" y1="68.5938" y2="2102.0313"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="233.5" x2="233.5" y1="68.5938" y2="2102.0313"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="599" x2="599" y1="68.5938" y2="2102.0313"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="849" x2="849" y1="68.5938" y2="2102.0313"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1113.5" x2="1113.5" y1="68.5938" y2="2102.0313"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1290.5" x2="1290.5" y1="68.5938" y2="2102.0313"/><rect fill="#FEFECE" filter="url(#fgmh1ua05c87c)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="47" x="8" y="33.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="33" x="15" y="53.292">Filter</text><rect fill="#FEFECE" filter="url(#fgmh1ua05c87c)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="47" x="8" y="2101.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="33" x="15" y="2121.0264">Filter</text><rect fill="#FEFECE" filter="url(#fgmh1ua05c87c)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="136" x="163.5" y="33.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="122" x="170.5" y="53.292">AbstractAuthFilter</text><rect fill="#FEFECE" filter="url(#fgmh1ua05c87c)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="136" x="163.5" y="2101.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="122" x="170.5" y="2121.0264">AbstractAuthFilter</text><rect fill="#FEFECE" filter="url(#fgmh1ua05c87c)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="191" x="502" y="33.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="177" x="509" y="53.292">AbstractSessionAuthFilter</text><rect fill="#FEFECE" filter="url(#fgmh1ua05c87c)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="191" x="502" y="2101.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="177" x="509" y="2121.0264">AbstractSessionAuthFilter</text><rect fill="#FEFECE" filter="url(#fgmh1ua05c87c)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="171" x="762" y="33.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="157" x="769" y="53.292">AbstractFormAuthFilter</text><rect fill="#FEFECE" filter="url(#fgmh1ua05c87c)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="171" x="762" y="2101.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="157" x="769" y="2121.0264">AbstractFormAuthFilter</text><rect fill="#FEFECE" filter="url(#fgmh1ua05c87c)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="114" x="1054.5" y="33.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="100" x="1061.5" y="53.292">FormAuthFilter</text><rect fill="#FEFECE" filter="url(#fgmh1ua05c87c)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="114" x="1054.5" y="2101.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="100" x="1061.5" y="2121.0264">FormAuthFilter</text><rect fill="#FEFECE" filter="url(#fgmh1ua05c87c)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="212" x="1182.5" y="33.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="198" x="1189.5" y="53.292">RememberMeFormAuthFilter</text><rect fill="#FEFECE" filter="url(#fgmh1ua05c87c)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="212" x="1182.5" y="2101.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="198" x="1189.5" y="2121.0264">RememberMeFormAuthFilter</text><rect fill="#FFFFFF" filter="url(#fgmh1ua05c87c)" height="1984.3047" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="228.5" y="99.7266"/><rect fill="#FFFFFF" filter="url(#fgmh1ua05c87c)" height="47.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="233.5" y="282.5234"/><rect fill="#FFFFFF" filter="url(#fgmh1ua05c87c)" height="47.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="233.5" y="555.5859"/><rect fill="#FFFFFF" filter="url(#fgmh1ua05c87c)" height="148.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="233.5" y="774.25"/><rect fill="#FFFFFF" filter="url(#fgmh1ua05c87c)" height="47.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="233.5" y="1674.4375"/><rect fill="#FFFFFF" filter="url(#fgmh1ua05c87c)" height="47.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="233.5" y="1987.8984"/><rect fill="#FFFFFF" filter="url(#fgmh1ua05c87c)" height="233.7969" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="594.5" y="702.9844"/><rect fill="#FFFFFF" filter="url(#fgmh1ua05c87c)" height="752.5234" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="594.5" y="990.0469"/><rect fill="#FFFFFF" filter="url(#fgmh1ua05c87c)" height="47.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="599.5" y="1252.1094"/><rect fill="#FFFFFF" filter="url(#fgmh1ua05c87c)" height="47.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="599.5" y="1554.1719"/><rect fill="#FFFFFF" filter="url(#fgmh1ua05c87c)" height="123.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="844.5" y="220.2578"/><rect fill="#FFFFFF" filter="url(#fgmh1ua05c87c)" height="138.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="844.5" y="478.1875"/><rect fill="#FFFFFF" filter="url(#fgmh1ua05c87c)" height="105.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="844.5" y="803.3828"/><rect fill="#FFFFFF" filter="url(#fgmh1ua05c87c)" height="138.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="844.5" y="1174.7109"/><rect fill="#FFFFFF" filter="url(#fgmh1ua05c87c)" height="138.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="844.5" y="1476.7734"/><rect fill="#FFFFFF" filter="url(#fgmh1ua05c87c)" height="153.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="844.5" y="1895.3672"/><rect fill="#FFFFFF" filter="url(#fgmh1ua05c87c)" height="62.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1108.5" y="128.8594"/><rect fill="#FFFFFF" filter="url(#fgmh1ua05c87c)" height="62.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1108.5" y="832.5156"/><rect fill="#FFFFFF" filter="url(#fgmh1ua05c87c)" height="214.7969" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1285.5" y="415.9219"/><rect fill="#FFFFFF" filter="url(#fgmh1ua05c87c)" height="199.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1285.5" y="1127.5781"/><rect fill="#FFFFFF" filter="url(#fgmh1ua05c87c)" height="199.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1285.5" y="1429.6406"/><rect fill="#FFFFFF" filter="url(#fgmh1ua05c87c)" height="260.1953" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1285.5" y="1802.8359"/><polygon fill="#A80036" points="216.5,95.7266,226.5,99.7266,216.5,103.7266,220.5,99.7266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="33.5" x2="222.5" y1="99.7266" y2="99.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="176" x="40.5" y="94.6606">doFilter(req,resp,chain)</text><polygon fill="#A80036" points="1096.5,124.8594,1106.5,128.8594,1096.5,132.8594,1100.5,128.8594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="238.5" x2="1102.5" y1="128.8594" y2="128.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="245.5" y="123.7935">preFilter</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="308.5" y="123.7935">(req, resp, chain)</text><rect fill="#FBFB77" filter="url(#fgmh1ua05c87c)" height="38" style="stroke: #A80036; stroke-width: 1.0;" width="97" x="1065" y="141.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="1069" y="157.9263">require model</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="1069" y="173.0591">initialization</text><polygon fill="#A80036" points="249.5,187.125,239.5,191.125,249.5,195.125,245.5,191.125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="243.5" x2="1112.5" y1="191.125" y2="191.125"/><polygon fill="#A80036" points="832.5,216.2578,842.5,220.2578,832.5,224.2578,836.5,220.2578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="238.5" x2="838.5" y1="220.2578" y2="220.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="109" x="245.5" y="215.1919">isProtectedURI</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="354.5" y="215.1919">(uri)</text><rect fill="#FBFB77" filter="url(#fgmh1ua05c87c)" height="23" style="stroke: #A80036; stroke-width: 1.0;" width="148" x="775" y="233.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="140" x="779" y="249.3247">never protect login uri</text><polygon fill="#A80036" points="254.5,278.5234,244.5,282.5234,254.5,286.5234,250.5,282.5234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="248.5" x2="843.5" y1="282.5234" y2="282.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="260.5" y="277.4575">[uri != login uri]</text><rect fill="#FBFB77" filter="url(#fgmh1ua05c87c)" height="23" style="stroke: #A80036; stroke-width: 1.0;" width="154" x="156" y="295.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="146" x="160" y="311.5903">check protection regex</text><polygon fill="#A80036" points="832.5,325.6563,842.5,329.6563,832.5,333.6563,836.5,329.6563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="238.5" x2="838.5" y1="329.6563" y2="329.6563"/><polygon fill="#A80036" points="249.5,339.6563,239.5,343.6563,249.5,347.6563,245.5,343.6563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="243.5" x2="848.5" y1="343.6563" y2="343.6563"/><rect fill="#EEEEEE" filter="url(#fgmh1ua05c87c)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1425.5" x="3" y="372.2227"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1428.5" y1="372.2227" y2="372.2227"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1428.5" y1="375.2227" y2="375.2227"/><rect fill="#EEEEEE" filter="url(#fgmh1ua05c87c)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="93" x="669.25" y="361.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="74" x="675.25" y="377.7231">Public URI</text><polygon fill="#A80036" points="1273.5,411.9219,1283.5,415.9219,1273.5,419.9219,1277.5,415.9219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="238.5" x2="1279.5" y1="415.9219" y2="415.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="164" x="245.5" y="410.856">processPublicRequest</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="409.5" y="410.856">(req, resp, chain)</text><rect fill="#FBFB77" filter="url(#fgmh1ua05c87c)" height="38" style="stroke: #A80036; stroke-width: 1.0;" width="147" x="1217" y="428.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="1221" y="444.9888">check remember_me</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="1221" y="460.1216">cookie if not logged in</text><polygon fill="#A80036" points="865.5,474.1875,855.5,478.1875,865.5,482.1875,861.5,478.1875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="859.5" x2="1284.5" y1="478.1875" y2="478.1875"/><rect fill="#FBFB77" filter="url(#fgmh1ua05c87c)" height="38" style="stroke: #A80036; stroke-width: 1.0;" width="177" x="761" y="491.1875"/><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="150" x="765" y="507.2544">redirect logged in users</text><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="169" x="765" y="522.3872">from login URI to index URI</text><polygon fill="#A80036" points="254.5,551.5859,244.5,555.5859,254.5,559.5859,250.5,555.5859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="248.5" x2="843.5" y1="555.5859" y2="555.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="189" x="260.5" y="550.52">[not logged or uri != login uri]</text><rect fill="#FBFB77" filter="url(#fgmh1ua05c87c)" height="23" style="stroke: #A80036; stroke-width: 1.0;" width="128" x="169" y="568.5859"/><text fill="#008000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="173" y="584.6528">process filter chain</text><polygon fill="#A80036" points="832.5,598.7188,842.5,602.7188,832.5,606.7188,836.5,602.7188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="238.5" x2="838.5" y1="602.7188" y2="602.7188"/><polygon fill="#A80036" points="1273.5,612.7188,1283.5,616.7188,1273.5,620.7188,1277.5,616.7188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="849.5" x2="1279.5" y1="616.7188" y2="616.7188"/><polygon fill="#A80036" points="249.5,626.7188,239.5,630.7188,249.5,634.7188,245.5,630.7188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="243.5" x2="1289.5" y1="630.7188" y2="630.7188"/><rect fill="#EEEEEE" filter="url(#fgmh1ua05c87c)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1425.5" x="3" y="659.2852"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1428.5" y1="659.2852" y2="659.2852"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1428.5" y1="662.2852" y2="662.2852"/><rect fill="#EEEEEE" filter="url(#fgmh1ua05c87c)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="121" x="655.25" y="648.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="102" x="661.25" y="664.7856">Protected URI</text><polygon fill="#A80036" points="582.5,698.9844,592.5,702.9844,582.5,706.9844,586.5,702.9844" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="238.5" x2="588.5" y1="702.9844" y2="702.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="149" x="245.5" y="697.9185">getAuthentifiedUser</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="394.5" y="697.9185">(req)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="604.5" x2="646.5" y1="732.1172" y2="732.1172"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="646.5" x2="646.5" y1="732.1172" y2="745.1172"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="605.5" x2="646.5" y1="745.1172" y2="745.1172"/><polygon fill="#A80036" points="615.5,741.1172,605.5,745.1172,615.5,749.1172,611.5,745.1172" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="114" x="611.5" y="727.0513">getSessionUser</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="58" x="725.5" y="727.0513">(session)</text><polygon fill="#A80036" points="254.5,770.25,244.5,774.25,254.5,778.25,250.5,774.25" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="248.5" x2="593.5" y1="774.25" y2="774.25"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="276" x="260.5" y="769.1841">[no user in session and uri == do_login uri]</text><polygon fill="#A80036" points="832.5,799.3828,842.5,803.3828,832.5,807.3828,836.5,803.3828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="243.5" x2="838.5" y1="803.3828" y2="803.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="93" x="250.5" y="798.3169">authenticate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="343.5" y="798.3169">(req)</text><polygon fill="#A80036" points="1096.5,828.5156,1106.5,832.5156,1096.5,836.5156,1100.5,832.5156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="854.5" x2="1102.5" y1="832.5156" y2="832.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="127" x="861.5" y="827.4497">checkCredentials</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="988.5" y="827.4497">(login, password)</text><rect fill="#FBFB77" filter="url(#fgmh1ua05c87c)" height="38" style="stroke: #A80036; stroke-width: 1.0;" width="119" x="1054" y="845.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="1058" y="861.5825">check credentails</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="1058" y="876.7153">in database</text><polygon fill="#A80036" points="865.5,890.7813,855.5,894.7813,865.5,898.7813,861.5,894.7813" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="859.5" x2="1112.5" y1="894.7813" y2="894.7813"/><polygon fill="#A80036" points="254.5,904.7813,244.5,908.7813,254.5,912.7813,250.5,908.7813" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="248.5" x2="848.5" y1="908.7813" y2="908.7813"/><polygon fill="#A80036" points="582.5,918.7813,592.5,922.7813,582.5,926.7813,586.5,922.7813" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="238.5" x2="588.5" y1="922.7813" y2="922.7813"/><polygon fill="#A80036" points="249.5,932.7813,239.5,936.7813,249.5,940.7813,245.5,936.7813" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="243.5" x2="598.5" y1="936.7813" y2="936.7813"/><path d="M143.5,951.7813 L302.5,951.7813 L302.5,958.7813 L292.5,968.7813 L143.5,968.7813 L143.5,951.7813 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="798.7891" style="stroke: #000000; stroke-width: 2.0;" width="1275" x="143.5" y="951.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="114" x="158.5" y="964.8481">granted access</text><polygon fill="#A80036" points="582.5,986.0469,592.5,990.0469,582.5,994.0469,586.5,990.0469" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="238.5" x2="588.5" y1="990.0469" y2="990.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="192" x="245.5" y="984.981">processProtectedRequest</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="145" x="437.5" y="984.981">(user, req, resp, chain)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="604.5" x2="646.5" y1="1019.1797" y2="1019.1797"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="646.5" x2="646.5" y1="1019.1797" y2="1032.1797"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="605.5" x2="646.5" y1="1032.1797" y2="1032.1797"/><polygon fill="#A80036" points="615.5,1028.1797,605.5,1032.1797,615.5,1036.1797,611.5,1032.1797" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="132" x="611.5" y="1014.1138">checkSessionUser</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="743.5" y="1014.1138">(user, session)</text><path d="M492,1047.1797 L611,1047.1797 L611,1054.1797 L601,1064.1797 L492,1064.1797 L492,1047.1797 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="288.0625" style="stroke: #000000; stroke-width: 2.0;" width="916.5" x="492" y="1047.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="74" x="507" y="1060.2466">logging in</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="604.5" x2="646.5" y1="1085.4453" y2="1085.4453"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="646.5" x2="646.5" y1="1085.4453" y2="1098.4453"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="605.5" x2="646.5" y1="1098.4453" y2="1098.4453"/><polygon fill="#A80036" points="615.5,1094.4453,605.5,1098.4453,615.5,1102.4453,611.5,1098.4453" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="112" x="611.5" y="1080.3794">setSessionUser</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="723.5" y="1080.3794">(user, session)</text><polygon fill="#A80036" points="1273.5,1123.5781,1283.5,1127.5781,1273.5,1131.5781,1277.5,1127.5781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="604.5" x2="1279.5" y1="1127.5781" y2="1127.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="192" x="611.5" y="1122.5122">processPostLoginRequest</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="145" x="803.5" y="1122.5122">(user, req, resp, chain)</text><rect fill="#FBFB77" filter="url(#fgmh1ua05c87c)" height="23" style="stroke: #A80036; stroke-width: 1.0;" width="204" x="1188" y="1140.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="196" x="1192" y="1156.645">handle remember_me request</text><polygon fill="#A80036" points="865.5,1170.7109,855.5,1174.7109,865.5,1178.7109,861.5,1174.7109" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="859.5" x2="1284.5" y1="1174.7109" y2="1174.7109"/><rect fill="#FBFB77" filter="url(#fgmh1ua05c87c)" height="38" style="stroke: #A80036; stroke-width: 1.0;" width="134" x="782" y="1187.7109"/><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="786" y="1203.7778">handle redirection</text><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="786" y="1218.9106">and saved requests</text><polygon fill="#A80036" points="620.5,1248.1094,610.5,1252.1094,620.5,1256.1094,616.5,1252.1094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="614.5" x2="843.5" y1="1252.1094" y2="1252.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="626.5" y="1247.0435">[not redirected]</text><rect fill="#FBFB77" filter="url(#fgmh1ua05c87c)" height="23" style="stroke: #A80036; stroke-width: 1.0;" width="53" x="573" y="1265.1094"/><text fill="#008000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="45" x="577" y="1281.1763">200 Ok</text><polygon fill="#A80036" points="832.5,1295.2422,842.5,1299.2422,832.5,1303.2422,836.5,1299.2422" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="604.5" x2="838.5" y1="1299.2422" y2="1299.2422"/><polygon fill="#A80036" points="1273.5,1309.2422,1283.5,1313.2422,1273.5,1317.2422,1277.5,1313.2422" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="849.5" x2="1279.5" y1="1313.2422" y2="1313.2422"/><polygon fill="#A80036" points="615.5,1323.2422,605.5,1327.2422,615.5,1331.2422,611.5,1327.2422" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="609.5" x2="1289.5" y1="1327.2422" y2="1327.2422"/><path d="M492,1349.2422 L622,1349.2422 L622,1356.2422 L612,1366.2422 L492,1366.2422 L492,1349.2422 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="288.0625" style="stroke: #000000; stroke-width: 2.0;" width="916.5" x="492" y="1349.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="85" x="507" y="1362.3091">logging out</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="604.5" x2="646.5" y1="1387.5078" y2="1387.5078"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="646.5" x2="646.5" y1="1387.5078" y2="1400.5078"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="605.5" x2="646.5" y1="1400.5078" y2="1400.5078"/><polygon fill="#A80036" points="615.5,1396.5078,605.5,1400.5078,615.5,1404.5078,611.5,1400.5078" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="125" x="611.5" y="1382.4419">clearSessionUser</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="736.5" y="1382.4419">(user, session)</text><polygon fill="#A80036" points="1273.5,1425.6406,1283.5,1429.6406,1273.5,1433.6406,1277.5,1429.6406" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="604.5" x2="1279.5" y1="1429.6406" y2="1429.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="203" x="611.5" y="1424.5747">processPostLogoutRequest</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="145" x="814.5" y="1424.5747">(user, req, resp, chain)</text><rect fill="#FBFB77" filter="url(#fgmh1ua05c87c)" height="23" style="stroke: #A80036; stroke-width: 1.0;" width="184" x="1198" y="1442.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="1202" y="1458.7075">clear remember_me cookie</text><polygon fill="#A80036" points="865.5,1472.7734,855.5,1476.7734,865.5,1480.7734,861.5,1476.7734" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="859.5" x2="1284.5" y1="1476.7734" y2="1476.7734"/><rect fill="#FBFB77" filter="url(#fgmh1ua05c87c)" height="38" style="stroke: #A80036; stroke-width: 1.0;" width="123" x="788" y="1489.7734"/><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="792" y="1505.8403">handle redirection</text><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="792" y="1520.9731">towards login uri</text><polygon fill="#A80036" points="620.5,1550.1719,610.5,1554.1719,620.5,1558.1719,616.5,1554.1719" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="614.5" x2="843.5" y1="1554.1719" y2="1554.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="626.5" y="1549.106">[not redirected]</text><rect fill="#FBFB77" filter="url(#fgmh1ua05c87c)" height="23" style="stroke: #A80036; stroke-width: 1.0;" width="53" x="573" y="1567.1719"/><text fill="#008000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="45" x="577" y="1583.2388">200 Ok</text><polygon fill="#A80036" points="832.5,1597.3047,842.5,1601.3047,832.5,1605.3047,836.5,1601.3047" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="604.5" x2="838.5" y1="1601.3047" y2="1601.3047"/><polygon fill="#A80036" points="1273.5,1611.3047,1283.5,1615.3047,1273.5,1619.3047,1277.5,1615.3047" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="849.5" x2="1279.5" y1="1615.3047" y2="1615.3047"/><polygon fill="#A80036" points="615.5,1625.3047,605.5,1629.3047,615.5,1633.3047,611.5,1629.3047" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="609.5" x2="1289.5" y1="1629.3047" y2="1629.3047"/><path d="M153.5,1651.3047 L335.5,1651.3047 L335.5,1658.3047 L325.5,1668.3047 L153.5,1668.3047 L153.5,1651.3047 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="78.2656" style="stroke: #000000; stroke-width: 2.0;" width="553.5" x="153.5" y="1651.3047"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="137" x="168.5" y="1664.3716">normal processing</text><polygon fill="#A80036" points="254.5,1670.4375,244.5,1674.4375,254.5,1678.4375,250.5,1674.4375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="248.5" x2="593.5" y1="1674.4375" y2="1674.4375"/><rect fill="#FBFB77" filter="url(#fgmh1ua05c87c)" height="23" style="stroke: #A80036; stroke-width: 1.0;" width="128" x="169" y="1687.4375"/><text fill="#008000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="173" y="1703.5044">process filter chain</text><polygon fill="#A80036" points="582.5,1717.5703,592.5,1721.5703,582.5,1725.5703,586.5,1721.5703" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="238.5" x2="588.5" y1="1721.5703" y2="1721.5703"/><polygon fill="#A80036" points="249.5,1738.5703,239.5,1742.5703,249.5,1746.5703,245.5,1742.5703" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="243.5" x2="598.5" y1="1742.5703" y2="1742.5703"/><path d="M153.5,1764.5703 L326.5,1764.5703 L326.5,1771.5703 L316.5,1781.5703 L153.5,1781.5703 L153.5,1764.5703 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="306.4609" style="stroke: #000000; stroke-width: 2.0;" width="1264.5" x="153.5" y="1764.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="128" x="168.5" y="1777.6372">forbidden access</text><polygon fill="#A80036" points="1273.5,1798.8359,1283.5,1802.8359,1273.5,1806.8359,1277.5,1802.8359" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="238.5" x2="1279.5" y1="1802.8359" y2="1802.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="195" x="245.5" y="1797.77">processForbiddenRequest</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="440.5" y="1797.77">(req, resp, chain)</text><rect fill="#FBFB77" filter="url(#fgmh1ua05c87c)" height="53" style="stroke: #A80036; stroke-width: 1.0;" width="235" x="1173" y="1815.8359"/><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="186" x="1177" y="1831.9028">check remember_me cookie,</text><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="1177" y="1847.0356">transfer control to</text><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="108" x="1296" y="1847.0356">ganted access</text><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="1177" y="1862.1685">if successful</text><polygon fill="#A80036" points="865.5,1891.3672,855.5,1895.3672,865.5,1899.3672,861.5,1895.3672" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="859.5" x2="1284.5" y1="1895.3672" y2="1895.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="871.5" y="1890.3013">[still no user]</text><rect fill="#FBFB77" filter="url(#fgmh1ua05c87c)" height="53" style="stroke: #A80036; stroke-width: 1.0;" width="123" x="788" y="1908.3672"/><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="792" y="1924.4341">handle redirection</text><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="792" y="1939.5669">towards login</text><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="792" y="1954.6997">and save request</text><polygon fill="#A80036" points="254.5,1983.8984,244.5,1987.8984,254.5,1991.8984,250.5,1987.8984" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="248.5" x2="843.5" y1="1987.8984" y2="1987.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="260.5" y="1982.8325">[not redirected]</text><rect fill="#FBFB77" filter="url(#fgmh1ua05c87c)" height="23" style="stroke: #A80036; stroke-width: 1.0;" width="99" x="184" y="2000.8984"/><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="188" y="2016.9653">403 Forbidden</text><polygon fill="#A80036" points="832.5,2031.0313,842.5,2035.0313,832.5,2039.0313,836.5,2035.0313" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="238.5" x2="838.5" y1="2035.0313" y2="2035.0313"/><polygon fill="#A80036" points="1273.5,2045.0313,1283.5,2049.0313,1273.5,2053.0313,1277.5,2049.0313" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="849.5" x2="1279.5" y1="2049.0313" y2="2049.0313"/><polygon fill="#A80036" points="249.5,2059.0313,239.5,2063.0313,249.5,2067.0313,245.5,2063.0313" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="243.5" x2="1289.5" y1="2063.0313" y2="2063.0313"/><polygon fill="#A80036" points="44.5,2080.0313,34.5,2084.0313,44.5,2088.0313,40.5,2084.0313" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="38.5" x2="232.5" y1="2084.0313" y2="2084.0313"/><!--
@startuml
skinparam backgroundColor white
title
	Autentication Filters Call Graph
end title

participant Filter
participant AbstractAuthFilter
participant AbstractSessionAuthFilter
participant AbstractFormAuthFilter
participant FormAuthFilter
participant RememberMeFormAuthFilter

Filter -> AbstractAuthFilter ++ : <b>doFilter(req,resp,chain)</b>

  AbstractAuthFilter -> FormAuthFilter ++ : <b>preFilter</b>(req, resp, chain)
    rnote over FormAuthFilter : require model\ninitialization
  return
  
  AbstractAuthFilter -> AbstractFormAuthFilter : <b>isProtectedURI</b>(uri)
    activate AbstractFormAuthFilter
    rnote over AbstractFormAuthFilter : never protect login uri
    AbstractAuthFilter <- AbstractFormAuthFilter ++ : [uri != login uri]
      rnote over AbstractAuthFilter : check protection regex
    return
  return

  == Public URI ==

  AbstractAuthFilter -> RememberMeFormAuthFilter ++ : <b>processPublicRequest</b>(req, resp, chain)
    rnote over RememberMeFormAuthFilter : check remember_me\ncookie if not logged in
    RememberMeFormAuthFilter -> AbstractFormAuthFilter ++
      rnote over AbstractFormAuthFilter : <font color="blue">redirect logged in users</font>\n<font color="blue">from login URI to index URI</font>
      AbstractFormAuthFilter -> AbstractAuthFilter ++ : [not logged or uri != login uri]
        rnote over AbstractAuthFilter : <font color="green">process filter chain</font>
      return
    return
  return

== Protected URI ==

  AbstractAuthFilter -> AbstractSessionAuthFilter ++ : <b>getAuthentifiedUser</b>(req)
    AbstractSessionAuthFilter -> AbstractSessionAuthFilter : <b>getSessionUser</b>(session)
    AbstractSessionAuthFilter -> AbstractAuthFilter ++ : [no user in session and uri == do_login uri]
      AbstractAuthFilter -> AbstractFormAuthFilter ++ : <b>authenticate</b>(req)
        AbstractFormAuthFilter -> FormAuthFilter ++ : <b>checkCredentials</b>(login, password)
          rnote over FormAuthFilter : check credentails\nin database
        return
      return
    return
  return  

  group granted access
    AbstractAuthFilter -> AbstractSessionAuthFilter ++ : <b>processProtectedRequest</b>(user, req, resp, chain)
      AbstractSessionAuthFilter -> AbstractSessionAuthFilter : <b>checkSessionUser</b>(user, session)
      group logging in
        AbstractSessionAuthFilter -> AbstractSessionAuthFilter : <b>setSessionUser</b>(user, session)
        AbstractSessionAuthFilter -> RememberMeFormAuthFilter ++ : <b>processPostLoginRequest</b>(user, req, resp, chain)
          rnote over RememberMeFormAuthFilter : handle remember_me request
          AbstractFormAuthFilter <- RememberMeFormAuthFilter ++
            rnote over AbstractFormAuthFilter : <font color="blue">handle redirection</font>\n<font color="blue">and saved requests</font>
            AbstractFormAuthFilter -> AbstractSessionAuthFilter ++ : [not redirected]
              rnote over AbstractSessionAuthFilter : <font color="green">200 Ok</font>
            return
          return
        return
      end
      group logging out
        AbstractSessionAuthFilter -> AbstractSessionAuthFilter : <b>clearSessionUser</b>(user, session)
        AbstractSessionAuthFilter -> RememberMeFormAuthFilter ++ : <b>processPostLogoutRequest</b>(user, req, resp, chain)
          rnote over RememberMeFormAuthFilter : clear remember_me cookie
          AbstractFormAuthFilter <- RememberMeFormAuthFilter ++
            rnote over AbstractFormAuthFilter : <font color="blue">handle redirection</font>\n<font color="blue">towards login uri</font>
            AbstractSessionAuthFilter <- AbstractFormAuthFilter ++ : [not redirected]
              rnote over AbstractSessionAuthFilter : <font color="green">200 Ok</font>
            return
          return    
        return
      end
      group normal processing
        AbstractAuthFilter <- AbstractSessionAuthFilter ++
          rnote over AbstractAuthFilter : <font color="green">process filter chain</font>
        return
      end
    return
  end

  group forbidden access
    AbstractAuthFilter -> RememberMeFormAuthFilter ++ : <b>processForbiddenRequest</b>(req, resp, chain)
      rnote over RememberMeFormAuthFilter : <font color="blue">check remember_me cookie,</font>\n<font color="blue">transfer control to <b>ganted access</b></font>\n<font color="blue">if successful</font>
      AbstractFormAuthFilter <- RememberMeFormAuthFilter ++ : [still no user]
        rnote over AbstractFormAuthFilter : <font color="blue">handle redirection</font>\n<font color="blue">towards login</font>\n<font color="blue">and save request</font>
        AbstractAuthFilter <- AbstractFormAuthFilter ++ : [not redirected]
          rnote over AbstractAuthFilter : <font color="red">403 Forbidden</font>
        return
      return
    return
  end

return

@enduml

PlantUML version 1.2019.05(Sat Apr 20 18:45:36 CEST 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_191-b12
Operating System: Linux
OS Version: 4.18.0-17-generic
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>